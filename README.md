# 🧪 음료개발 AI 플랫폼 v5

음료개발 데이터베이스(174종 원료, 321개 시장제품) + OpenAI GPT/DALL-E 통합 플랫폼

## 🚀 실행

```bash
pip install -r requirements.txt
streamlit run app.py
```

**API 키 설정**: `.streamlit/secrets.toml`에 OpenAI 키 입력
```toml
OPENAI_API_KEY = "sk-..."
```

## 📱 10개 기능

| # | 메뉴 | 기능 |
|---|------|------|
| 1 | 🧪 배합 시뮬레이터 | 원료 선택 → Brix/pH(ΔpH)/산도/감미/원가 자동계산, 규격판정, 가이드배합 |
| 2 | 🧑‍🔬 AI 연구원 평가 | GPT-4o 기반 20년 경력 연구원이 관능예측·밸런스진단·개선제안·수정배합표 |
| 3 | 🎨 제품 이미지 생성 | DALL-E 3로 배합 기반 패키지 디자인 시안 자동 생성 |
| 4 | 🔄 역설계 | 시판제품 321개 중 선택 → 배합비 추정 → 시뮬레이터 연동 |
| 5 | 📊 시장분석 | 제조사·유형·가격·원재료 패턴 대시보드 |
| 6 | 🎓 교육용 실습 | 6개 시나리오, 학습가이드, 규격 달성 챌린지 |
| 7 | 📋 신제품 기획서 | 배합→규격→HACCP공정→원가마진→기획서 다운로드 |
| 8 | 📑 식품표시사항 | 원재료명 표시순서 + 영양성분표 자동생성 |
| 9 | 🧫 시작 레시피 | 1L/5L/20L 스케일 칭량표 + 투입순서 가이드 |
| 10 | 📓 배합 히스토리 | 실험 버전 저장·비교·메모, 시뮬레이터/AI평가 연동 |

## 🔗 기능간 연동

```
배합 시뮬레이터 ←→ AI 연구원 (수정배합 자동반영)
      ↕                    ↕
역설계 → 시뮬레이터     AI평가 → 히스토리
      ↕
이미지생성 ← 배합표 + 제품명
      ↕
기획서 ← 배합 + 규격 + 공정 + 원가
      ↕
식품표시 ← 배합표 순서 정렬
시작레시피 ← 배합표 스케일 환산
```

## 📐 계산 모델

- **ΔpH**: pH 3.5 기준 (0.3% 구연산 완충계) 변화량
- **감미기여**: 감미도(설탕대비) × 배합비 / 100
- **산도기여**: 1% 적정산도 × 배합비
- **원가**: 원료단가 × 배합비 / 100

## 🧑‍🔬 AI 연구원 페르소나

GPT-4o에 20년 경력 수석 연구원 시스템 프롬프트 적용:
- 관능 예측 (초두감미/중미/후미/바디감)
- 밸런스 진단 (당산비, 감미구조, 산미캐릭터)
- 개선 제안 (구체적 수치)
- 기술적 효과 (안정성, 살균, 유통기한)
- 수정 배합표 JSON 자동 추출 → 시뮬레이터 원클릭 적용
